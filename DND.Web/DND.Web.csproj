<Project Sdk="Microsoft.NET.Sdk.Web">

  <PropertyGroup>
    <TargetFramework>net47</TargetFramework>
    <TypeScriptToolsVersion>2.4</TypeScriptToolsVersion>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|AnyCPU'">
    <DocumentationFile>bin\Release\net47\Api.xml</DocumentationFile>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|AnyCPU'">
    <DocumentationFile>bin\Debug\net47\Api.xml</DocumentationFile>
  </PropertyGroup>

  <ItemGroup>
    <Compile Remove="ClientApp\**" />
    <Content Remove="ClientApp\**" />
    <EmbeddedResource Remove="ClientApp\**" />
    <None Remove="ClientApp\**" />
  </ItemGroup>

  <ItemGroup>
    <Compile Remove="Models\ProjectsViewModels\ProjectsViewModels.cs" />
    <Compile Remove="ViewComponents\BaseViewComponent.cs" />
  </ItemGroup>

  <ItemGroup>
    <Content Remove="App_Data\airlines.json" />
    <Content Remove="App_Data\airportsAll.json" />
    <Content Remove="App_Data\countries.json" />
    <Content Remove="Views\Blog\_LatestBlogPosts.cshtml" />
    <Content Remove="Views\Shared\EditorTemplates\DestinationType.cshtml" />
  </ItemGroup>

  <ItemGroup>
    <None Remove="App_Data\Regions.csv" />
    <None Remove="App_Data\ffmpeg\ffmpeg.exe" />
  </ItemGroup>

  <ItemGroup>
    <Content Include="App_Data\ffmpeg\ffmpeg.exe" />
  </ItemGroup>

  <ItemGroup>
    <PackageReference Include="AspNetCoreRateLimit" Version="2.1.0" />
    <PackageReference Include="Autofac" Version="4.6.2" />
    <PackageReference Include="Autofac.Extensions.DependencyInjection" Version="4.2.1" />
    <PackageReference Include="AutoMapper" Version="6.2.2" />
    <PackageReference Include="EntityFramework" Version="6.2.0" />
    <PackageReference Include="Microsoft.AspNetCore" Version="2.0.2" />
    <PackageReference Include="Microsoft.AspNetCore.Authentication.JwtBearer" Version="2.0.3" />
    <PackageReference Include="Microsoft.AspNetCore.Cors" Version="2.0.2" />
    <PackageReference Include="Microsoft.AspNetCore.Identity.EntityFrameworkCore" Version="2.0.2" />
    <PackageReference Include="Microsoft.AspNetCore.Mvc" Version="2.0.3" />
    <PackageReference Include="Microsoft.AspNetCore.Mvc.Formatters.Xml" Version="2.0.3" />
    <PackageReference Include="Microsoft.AspNetCore.Mvc.Razor.ViewCompilation" Version="2.0.3" PrivateAssets="All" />
    <PackageReference Include="Microsoft.AspNetCore.Mvc.Versioning" Version="2.1.0" />
    <PackageReference Include="Microsoft.AspNetCore.Razor.Runtime" Version="2.0.2" />
    <PackageReference Include="Microsoft.AspNetCore.ResponseCaching" Version="2.0.2" />
    <PackageReference Include="Microsoft.AspNetCore.ResponseCompression" Version="2.0.2" />
    <PackageReference Include="Microsoft.AspNetCore.StaticFiles" Version="2.0.2" />
    <PackageReference Include="Microsoft.EntityFrameworkCore" Version="2.0.2" />
    <PackageReference Include="Microsoft.EntityFrameworkCore.Sqlite" Version="2.0.2" />
    <PackageReference Include="Microsoft.VisualStudio.Web.BrowserLink" Version="2.0.2" />
    <PackageReference Include="Newtonsoft.Json" Version="11.0.1" />
    <PackageReference Include="Serilog.AspNetCore" Version="2.1.1" />
    <PackageReference Include="Serilog.Settings.Configuration" Version="2.6.1" />
    <PackageReference Include="Serilog.Sinks.Console" Version="3.1.1" />
    <PackageReference Include="Serilog.Sinks.Debug" Version="1.0.0" />
    <PackageReference Include="Serilog.Sinks.MSSqlServer" Version="5.1.1" />
    <PackageReference Include="Serilog.Sinks.RollingFile" Version="3.3.0" />
    <PackageReference Include="Swashbuckle.AspNetCore" Version="2.3.0" />
    <PackageReference Include="System.Data.SqlClient" Version="4.4.3" />
    <PackageReference Include="System.Data.SQLite" Version="1.0.108" />
  </ItemGroup>

  <ItemGroup>
    <DotNetCliToolReference Include="Microsoft.VisualStudio.Web.CodeGeneration.Tools" Version="2.0.1" />
  </ItemGroup>

  <ItemGroup>
    <Folder Include="Account\Components\" />
    <Folder Include="Account\ViewComponents\" />
    <Folder Include="Admin\Components\" />
    <Folder Include="Admin\ViewComponents\" />
    <Folder Include="Author\Components\" />
    <Folder Include="Author\ViewComponents\" />
    <Folder Include="Blog\Components\" />
    <Folder Include="Blog\ViewComponents\" />
    <Folder Include="BucketList\Components\" />
    <Folder Include="BucketList\ViewComponents\" />
    <Folder Include="CarouselItem\Components\" />
    <Folder Include="Category\Components\" />
    <Folder Include="ContentHtml\Components\" />
    <Folder Include="ContentText\Components\" />
    <Folder Include="Controllers\Admin\" />
    <Folder Include="Controllers\Api\" />
    <Folder Include="Faq\Components\" />
    <Folder Include="FlightSearch\Components\" />
    <Folder Include="FlightSearch\Controllers\" />
    <Folder Include="FlightSearch\Models\" />
    <Folder Include="FlightSearch\ViewComponents\" />
    <Folder Include="FlightSearch\Views\" />
    <Folder Include="Gallery\Components\" />
    <Folder Include="Home\Components\" />
    <Folder Include="Home\ViewComponents\" />
    <Folder Include="Location\Components\" />
    <Folder Include="MailingList\Components\" />
    <Folder Include="Manage\Components\" />
    <Folder Include="Manage\Api\" />
    <Folder Include="Manage\ViewComponents\" />
    <Folder Include="Manage\Views\" />
    <Folder Include="Models\AccountViewModels\" />
    <Folder Include="Models\BlogPostViewModels\" />
    <Folder Include="Models\CarouselViewModels\" />
    <Folder Include="Models\ManageViewModels\" />
    <Folder Include="Models\ProjectsViewModels\" />
    <Folder Include="Models\SidebarViewModels\" />
    <Folder Include="Models\TestimonialViewModels\" />
    <Folder Include="Project\Components\" />
    <Folder Include="LatestBlogPosts\Api\" />
    <Folder Include="LatestBlogPosts\Components\" />
    <Folder Include="LatestBlogPosts\Controllers\" />
    <Folder Include="LatestBlogPosts\Models\" />
    <Folder Include="LatestBlogPosts\Views\" />
    <Folder Include="Sidebar\Api\" />
    <Folder Include="Sidebar\Components\" />
    <Folder Include="Sidebar\Controllers\" />
    <Folder Include="Sidebar\Views\" />
    <Folder Include="Tag\Components\" />
    <Folder Include="Tag\Models\" />
    <Folder Include="Tag\ViewComponents\" />
    <Folder Include="Tag\Views\" />
    <Folder Include="Account\Api\" />
    <Folder Include="Account\Views\" />
    <Folder Include="Admin\Api\" />
    <Folder Include="Admin\Models\" />
    <Folder Include="Admin\Views\" />
    <Folder Include="App_Data\Logs\" />
    <Folder Include="Author\Models\" />
    <Folder Include="Author\Views\" />
    <Folder Include="Blog\Views\" />
    <Folder Include="Category\Api\" />
    <Folder Include="Category\Models\" />
    <Folder Include="Category\ViewComponents\" />
    <Folder Include="Category\Views\" />
    <Folder Include="BucketList\Api\" />
    <Folder Include="BucketList\Models\" />
    <Folder Include="BucketList\Views\" />
    <Folder Include="CarouselItem\Api\" />
    <Folder Include="CarouselItem\Views\" />
    <Folder Include="ContentHtml\Api\" />
    <Folder Include="ContentHtml\Models\" />
    <Folder Include="ContentText\Api\" />
    <Folder Include="ContentText\Models\" />
    <Folder Include="ContentText\Views\" />
    <Folder Include="Faq\Models\" />
    <Folder Include="Faq\Views\" />
    <Folder Include="Gallery\Api\" />
    <Folder Include="Gallery\Models\" />
    <Folder Include="Gallery\ViewComponents\" />
    <Folder Include="Gallery\Views\" />
    <Folder Include="Home\Views\" />
    <Folder Include="Location\Models\" />
    <Folder Include="Location\ViewComponents\" />
    <Folder Include="Location\Views\" />
    <Folder Include="MailingList\Models\" />
    <Folder Include="MailingList\ViewComponents\" />
    <Folder Include="MailingList\Views\" />
    <Folder Include="Project\Views\" />
    <Folder Include="Template\Api\" />
    <Folder Include="Template\Components\" />
    <Folder Include="Template\Controllers\" />
    <Folder Include="Template\Models\" />
    <Folder Include="Template\ViewComponents\" />
    <Folder Include="Template\Views\" />
    <Folder Include="Testimonial\Components\" />
    <Folder Include="Testimonial\Views\" />
    <Folder Include="TravelMap\Api\" />
    <Folder Include="TravelMap\Components\" />
    <Folder Include="TravelMap\Models\" />
    <Folder Include="TravelMap\ViewComponents\" />
    <Folder Include="TravelMap\Views\" />
    <Folder Include="Scripts_Compile\" />
    <Folder Include="Videos\Api\" />
    <Folder Include="Videos\Components\" />
    <Folder Include="Videos\Models\" />
    <Folder Include="Videos\ViewComponents\" />
    <Folder Include="Videos\Views\" />
    <Folder Include="ViewComponents\" />
    <Folder Include="Views\TravelMap\" />
    <Folder Include="Views\Shared\CRUD\" />
    <Folder Include="Views\Shared\Footer\" />
    <Folder Include="wwwroot\css\" />
    <Folder Include="wwwroot\FileManager\tmp\" />
    <Folder Include="wwwroot\images\" />
    <Folder Include="wwwroot\js\" />
    <Folder Include="wwwroot\vendor\" />
  </ItemGroup>

  <ItemGroup>
    <None Include="Views\Shared\Alerts\_Alerts.cshtml" />
    <None Include="Views\Shared\Alerts\_Error.cshtml" />
    <None Include="Views\Shared\Components\LatestBlogPosts\Default.cshtml" />
    <None Include="Views\Shared\Components\Sidebar\Default.cshtml" />
    <None Include="Views\Shared\Sidebar\_SidebarAboutMe.cshtml" />
    <None Include="Views\Shared\Sidebar\_SidebarAffiliates.cshtml" />
    <None Include="Views\Shared\Sidebar\_SidebarCategories.cshtml" />
    <None Include="Views\Shared\Sidebar\_SidebarInstagram.cshtml" />
    <None Include="Views\Shared\Sidebar\_SidebarLatestBlogPosts.cshtml" />
    <None Include="Views\Shared\Sidebar\_SidebarLatestPhotos.cshtml" />
    <None Include="Views\Shared\Sidebar\_SidebarMailingList.cshtml" />
    <None Include="Views\Shared\Sidebar\_SidebarRSSFeed.cshtml" />
    <None Include="Views\Shared\Sidebar\_SidebarTags.cshtml" />
    <None Include="wwwroot\FileManager\js\custom.js" />
    <None Include="wwwroot\FileManager\js\directory.js" />
    <None Include="wwwroot\FileManager\js\file.js" />
    <None Include="wwwroot\FileManager\js\filetypes.js" />
    <None Include="wwwroot\FileManager\js\jquery-1.10.2.min.js" />
    <None Include="wwwroot\FileManager\js\jquery-1.11.1.min.js" />
    <None Include="wwwroot\FileManager\js\jquery-2.1.1.min.js" />
    <None Include="wwwroot\FileManager\js\jquery-dateFormat.min.js" />
    <None Include="wwwroot\FileManager\js\jquery-ui-1.10.4.custom.min.js" />
    <None Include="wwwroot\FileManager\js\main.js" />
    <None Include="wwwroot\FileManager\js\main.min.js" />
    <None Include="wwwroot\FileManager\js\mini-main.js" />
    <None Include="wwwroot\FileManager\js\tiny_mce_popup.js" />
    <None Include="wwwroot\FileManager\js\utils.js" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\DND.Common\DND.Common.csproj" />
    <ProjectReference Include="..\DND.Domain\DND.Domain.csproj" />
    <ProjectReference Include="..\DND.EFPersistance.Identity\DND.EFPersistance.Identity.csproj" />
    <ProjectReference Include="..\Marvin.Cache.Headers\Marvin.Cache.Headers.csproj" />
  </ItemGroup>

  <ItemGroup>
    <Reference Include="System.ServiceModel" />
  </ItemGroup>

  <ItemGroup>
    <None Update="DND.db">
      <CopyToOutputDirectory>Always</CopyToOutputDirectory>
    </None>
  </ItemGroup>

  <Target Name="MyPreCompileTarget" BeforeTargets="Build">
    <Exec Command="gulp clean" />
    <Exec Command="gulp less" />
    <Exec Command="gulp scripts" />
    <Exec Command="gulp min" />
  </Target>

  <Target Name="PreBuild" BeforeTargets="PreBuildEvent">
    <Exec Command="SET plugins=&quot;$(TargetDir)plugins\&quot;&#xD;&#xA;del /q %plugins%\*&#xD;&#xA;for /d %%x in (%plugins%\*) do @rd /s /q ^&quot;%%x^&quot;&#xD;&#xA;&#xD;&#xA;&quot;$(MSBuildBinPath)\msbuild.exe&quot; &quot;$(ProjectDir)..\DND.EFPersistance\DND.EFPersistance.csproj&quot; /p:Configuration=$(ConfigurationName) /v:d&#xD;&#xA;&quot;$(MSBuildBinPath)\msbuild&quot; &quot;$(ProjectDir)..\DND.UnitOfWork\DND.UnitOfWork.csproj&quot; /p:Configuration=$(ConfigurationName) /v:d&#xD;&#xA;&quot;$(MSBuildBinPath)\msbuild&quot; &quot;$(ProjectDir)..\DND.Repository\DND.Repository.csproj&quot; /p:Configuration=$(ConfigurationName) /v:d&#xD;&#xA;&quot;$(MSBuildBinPath)\msbuild&quot; &quot;$(ProjectDir)..\DND.ApplicationServices\DND.ApplicationServices.csproj&quot; /p:Configuration=$(ConfigurationName) /v:d&#xD;&#xA;&quot;$(MSBuildBinPath)\msbuild&quot; &quot;$(ProjectDir)..\DND.DomainServices\DND.DomainServices.csproj&quot; /p:Configuration=$(ConfigurationName) /v:d&#xD;&#xA;&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.ApplicationServices\bin\$(ConfigurationName)\*.dll&quot; %plugins% /Y&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.DomainServices\bin\$(ConfigurationName)\*.dll&quot; %plugins% /Y&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.Repository\bin\$(ConfigurationName)\*.dll&quot; %plugins% /Y&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.UnitOfWork\bin\$(ConfigurationName)\*.dll&quot; %plugins% /Y&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.EFPersistance\bin\$(ConfigurationName)\*.dll&quot; %plugins% /Y&#xD;&#xA;&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.ApplicationServices\bin\$(ConfigurationName)\*.pdb&quot; %plugins% /Y&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.DomainServices\bin\$(ConfigurationName)\*.pdb&quot; %plugins% /Y&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.Repository\bin\$(ConfigurationName)\*.pdb&quot; %plugins% /Y&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.UnitOfWork\bin\$(ConfigurationName)\*.pdb&quot; %plugins% /Y&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.EFPersistance\bin\$(ConfigurationName)\*.pdb&quot; %plugins% /Y" />
  </Target>

  <Target Name="PostBuild" AfterTargets="PostBuildEvent">
    <Exec Command="SET bin=&quot;$(TargetDir)&quot;&#xD;&#xA;SET plugins=&quot;$(TargetDir)plugins\&quot;&#xD;&#xA;SET project=&quot;$(ProjectDir)&quot;&#xD;&#xA;&#xD;&#xA;for %%F in (%plugins%*) do @if exist &quot;%bin%%%~nxF&quot; (del /q %plugins%%%~nxF)" />
  </Target>

  <Target Name="Copy" AfterTargets="AfterPublish">
    <Exec Command="$(ProjectDir)..\BatchFiles\PostBuildEventPublish.bat &quot;$(ProjectDir)\bin\$(Configuration)\&quot; &quot;C:\Development\DigitalNomadDaveAspNetCore\Publish\$(Configuration)\&quot; " />
    <Message Importance="Normal" Text="Finished PostBuildEventPublish.bat" />
  </Target>

</Project>
