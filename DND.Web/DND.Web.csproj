<Project Sdk="Microsoft.NET.Sdk.Web">

  <PropertyGroup>
    <TargetFramework>net47</TargetFramework>
    <TypeScriptToolsVersion>2.4</TypeScriptToolsVersion>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|AnyCPU'">
    <DocumentationFile>bin\Release\net47\Api.xml</DocumentationFile>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|AnyCPU'">
    <DocumentationFile>bin\Debug\net47\Api.xml</DocumentationFile>
  </PropertyGroup>

  <ItemGroup>
    <Compile Remove="ClientApp\**" />
    <Content Remove="ClientApp\**" />
    <EmbeddedResource Remove="ClientApp\**" />
    <None Remove="ClientApp\**" />
  </ItemGroup>

  <ItemGroup>
    <Content Remove="App_Data\airlines.json" />
    <Content Remove="App_Data\airportsAll.json" />
    <Content Remove="App_Data\countries.json" />
    <Content Remove="Implementation\Shared\Views\EditorTemplates\DestinationType.cshtml" />
  </ItemGroup>

  <ItemGroup>
    <None Remove="App_Data\Regions.csv" />
    <None Remove="App_Data\ffmpeg\ffmpeg.exe" />
  </ItemGroup>

  <ItemGroup>
    <Content Include="App_Data\ffmpeg\ffmpeg.exe" />
  </ItemGroup>

  <ItemGroup>
    <PackageReference Include="AspNetCoreRateLimit" Version="2.1.0" />
    <PackageReference Include="Autofac" Version="4.6.2" />
    <PackageReference Include="Autofac.Extensions.DependencyInjection" Version="4.2.2" />
    <PackageReference Include="AutoMapper" Version="6.2.2" />
    <PackageReference Include="EntityFramework" Version="6.2.0" />
    <PackageReference Include="Microsoft.AspNetCore" Version="2.0.2" />
    <PackageReference Include="Microsoft.AspNetCore.Authentication.JwtBearer" Version="2.0.3" />
    <PackageReference Include="Microsoft.AspNetCore.Cors" Version="2.0.2" />
    <PackageReference Include="Microsoft.AspNetCore.Identity.EntityFrameworkCore" Version="2.0.2" />
    <PackageReference Include="Microsoft.AspNetCore.Mvc" Version="2.0.3" />
    <PackageReference Include="Microsoft.AspNetCore.Mvc.Formatters.Xml" Version="2.0.3" />
    <PackageReference Include="Microsoft.AspNetCore.Mvc.Razor.ViewCompilation" Version="2.0.3" PrivateAssets="All" />
    <PackageReference Include="Microsoft.AspNetCore.Mvc.Versioning" Version="2.1.0" />
    <PackageReference Include="Microsoft.AspNetCore.Razor.Runtime" Version="2.0.2" />
    <PackageReference Include="Microsoft.AspNetCore.ResponseCaching" Version="2.0.2" />
    <PackageReference Include="Microsoft.AspNetCore.ResponseCompression" Version="2.0.2" />
    <PackageReference Include="Microsoft.AspNetCore.StaticFiles" Version="2.0.2" />
    <PackageReference Include="Microsoft.EntityFrameworkCore" Version="2.0.2" />
    <PackageReference Include="Microsoft.EntityFrameworkCore.Sqlite" Version="2.0.2" />
    <PackageReference Include="Microsoft.VisualStudio.Web.BrowserLink" Version="2.0.2" />
    <PackageReference Include="Newtonsoft.Json" Version="11.0.2" />
    <PackageReference Include="Serilog.AspNetCore" Version="2.1.1" />
    <PackageReference Include="Serilog.Settings.Configuration" Version="2.6.1" />
    <PackageReference Include="Serilog.Sinks.Console" Version="3.1.1" />
    <PackageReference Include="Serilog.Sinks.Debug" Version="1.0.1" />
    <PackageReference Include="Serilog.Sinks.MSSqlServer" Version="5.1.1" />
    <PackageReference Include="Serilog.Sinks.RollingFile" Version="3.3.0" />
    <PackageReference Include="Swashbuckle.AspNetCore" Version="2.3.0" />
    <PackageReference Include="System.Data.SqlClient" Version="4.4.3" />
    <PackageReference Include="System.Data.SQLite" Version="1.0.108" />
  </ItemGroup>

  <ItemGroup>
    <DotNetCliToolReference Include="Microsoft.VisualStudio.Web.CodeGeneration.Tools" Version="2.0.1" />
  </ItemGroup>

  <ItemGroup>
    <Folder Include="Controllers\Admin\" />
    <Folder Include="Controllers\Api\" />
    <Folder Include="Implementation\Account\ViewComponents\" />
    <Folder Include="Implementation\Admin\ViewComponents\" />
    <Folder Include="Implementation\Author\ViewComponents\" />
    <Folder Include="Implementation\BucketList\ViewComponents\" />
    <Folder Include="Implementation\FlightSearch\Controllers\" />
    <Folder Include="Implementation\FlightSearch\Models\" />
    <Folder Include="Implementation\FlightSearch\ViewComponents\" />
    <Folder Include="Implementation\FlightSearch\Views\" />
    <Folder Include="Implementation\Home\Api\" />
    <Folder Include="Implementation\Home\Models\" />
    <Folder Include="Implementation\Home\ViewComponents\" />
    <Folder Include="Implementation\Manage\Api\" />
    <Folder Include="Implementation\Manage\ViewComponents\" />
    <Folder Include="Implementation\Sidebar\Views\" />
    <Folder Include="Implementation\Tag\Models\" />
    <Folder Include="Implementation\Tag\ViewComponents\" />
    <Folder Include="Implementation\Tag\Views\" />
    <Folder Include="Implementation\Account\Api\" />
    <Folder Include="Implementation\Admin\Api\" />
    <Folder Include="Implementation\Admin\Models\" />
    <Folder Include="App_Data\Logs\" />
    <Folder Include="Implementation\Author\Models\" />
    <Folder Include="Implementation\Author\Views\" />
    <Folder Include="Implementation\Category\Models\" />
    <Folder Include="Implementation\Category\ViewComponents\" />
    <Folder Include="Implementation\Category\Views\" />
    <Folder Include="Implementation\BucketList\Api\" />
    <Folder Include="Implementation\BucketList\Models\" />
    <Folder Include="Implementation\CarouselItem\Api\" />
    <Folder Include="Implementation\CarouselItem\Views\" />
    <Folder Include="Implementation\ContentHtml\Models\" />
    <Folder Include="Implementation\ContentText\Models\" />
    <Folder Include="Implementation\ContentText\Views\" />
    <Folder Include="Implementation\Faq\Models\" />
    <Folder Include="Implementation\Faq\Views\" />
    <Folder Include="Implementation\Gallery\Api\" />
    <Folder Include="Implementation\Gallery\Models\" />
    <Folder Include="Implementation\Gallery\ViewComponents\" />
    <Folder Include="Implementation\Location\Models\" />
    <Folder Include="Implementation\Location\ViewComponents\" />
    <Folder Include="Implementation\MailingList\ViewComponents\" />
    <Folder Include="Implementation\MailingList\Views\" />
    <Folder Include="Implementation\Project\Views\" />
    <Folder Include="Implementation\Testimonial\Views\" />
    <Folder Include="Implementation\TravelMap\Api\" />
    <Folder Include="Implementation\TravelMap\Models\" />
    <Folder Include="Implementation\TravelMap\ViewComponents\" />
    <Folder Include="Implementation\TravelMap\Views\" />
    <Folder Include="Views\" />
    <Folder Include="ViewComponents\" />
    <Folder Include="Scripts_Compile\" />
    <Folder Include="Implementation\Videos\Api\" />
    <Folder Include="Implementation\Videos\Models\" />
    <Folder Include="Implementation\Videos\ViewComponents\" />
    <Folder Include="Implementation\Videos\Views\" />
    <Folder Include="wwwroot\css\" />
    <Folder Include="wwwroot\FileManager\tmp\" />
    <Folder Include="wwwroot\images\" />
    <Folder Include="wwwroot\js\" />
    <Folder Include="wwwroot\vendor\" />
  </ItemGroup>

  <ItemGroup>
    <None Include="wwwroot\FileManager\js\custom.js" />
    <None Include="wwwroot\FileManager\js\directory.js" />
    <None Include="wwwroot\FileManager\js\file.js" />
    <None Include="wwwroot\FileManager\js\filetypes.js" />
    <None Include="wwwroot\FileManager\js\jquery-1.10.2.min.js" />
    <None Include="wwwroot\FileManager\js\jquery-1.11.1.min.js" />
    <None Include="wwwroot\FileManager\js\jquery-2.1.1.min.js" />
    <None Include="wwwroot\FileManager\js\jquery-dateFormat.min.js" />
    <None Include="wwwroot\FileManager\js\jquery-ui-1.10.4.custom.min.js" />
    <None Include="wwwroot\FileManager\js\main.js" />
    <None Include="wwwroot\FileManager\js\main.min.js" />
    <None Include="wwwroot\FileManager\js\mini-main.js" />
    <None Include="wwwroot\FileManager\js\tiny_mce_popup.js" />
    <None Include="wwwroot\FileManager\js\utils.js" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\DND.Common\DND.Common.csproj" />
    <ProjectReference Include="..\DND.Domain\DND.Domain.csproj" />
    <ProjectReference Include="..\DND.EFPersistance.Identity\DND.EFPersistance.Identity.csproj" />
    <ProjectReference Include="..\Marvin.Cache.Headers\Marvin.Cache.Headers.csproj" />
  </ItemGroup>

  <ItemGroup>
    <Reference Include="System.ServiceModel" />
  </ItemGroup>

  <ItemGroup>
    <None Update="DND.db">
      <CopyToOutputDirectory>Always</CopyToOutputDirectory>
    </None>
  </ItemGroup>

  <Target Name="MyPreCompileTarget" BeforeTargets="Build">
    <Exec Command="gulp clean" />
    <Exec Command="gulp less" />
    <Exec Command="gulp scripts" />
    <Exec Command="gulp min" />
  </Target>

  <Target Name="PreBuild" BeforeTargets="PreBuildEvent">
    <Exec Command="SET plugins=&quot;$(TargetDir)plugins\&quot;&#xD;&#xA;del /q %plugins%\*&#xD;&#xA;for /d %%x in (%plugins%\*) do @rd /s /q ^&quot;%%x^&quot;&#xD;&#xA;&#xD;&#xA;&quot;$(MSBuildBinPath)\msbuild.exe&quot; &quot;$(ProjectDir)..\DND.EFPersistance\DND.EFPersistance.csproj&quot; /p:Configuration=$(ConfigurationName) /v:d&#xD;&#xA;&quot;$(MSBuildBinPath)\msbuild&quot; &quot;$(ProjectDir)..\DND.UnitOfWork\DND.UnitOfWork.csproj&quot; /p:Configuration=$(ConfigurationName) /v:d&#xD;&#xA;&quot;$(MSBuildBinPath)\msbuild&quot; &quot;$(ProjectDir)..\DND.Repository\DND.Repository.csproj&quot; /p:Configuration=$(ConfigurationName) /v:d&#xD;&#xA;&quot;$(MSBuildBinPath)\msbuild&quot; &quot;$(ProjectDir)..\DND.ApplicationServices\DND.ApplicationServices.csproj&quot; /p:Configuration=$(ConfigurationName) /v:d&#xD;&#xA;&quot;$(MSBuildBinPath)\msbuild&quot; &quot;$(ProjectDir)..\DND.DomainServices\DND.DomainServices.csproj&quot; /p:Configuration=$(ConfigurationName) /v:d&#xD;&#xA;&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.ApplicationServices\bin\$(ConfigurationName)\*.dll&quot; %plugins% /Y&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.DomainServices\bin\$(ConfigurationName)\*.dll&quot; %plugins% /Y&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.Repository\bin\$(ConfigurationName)\*.dll&quot; %plugins% /Y&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.UnitOfWork\bin\$(ConfigurationName)\*.dll&quot; %plugins% /Y&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.EFPersistance\bin\$(ConfigurationName)\*.dll&quot; %plugins% /Y&#xD;&#xA;&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.ApplicationServices\bin\$(ConfigurationName)\*.pdb&quot; %plugins% /Y&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.DomainServices\bin\$(ConfigurationName)\*.pdb&quot; %plugins% /Y&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.Repository\bin\$(ConfigurationName)\*.pdb&quot; %plugins% /Y&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.UnitOfWork\bin\$(ConfigurationName)\*.pdb&quot; %plugins% /Y&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.EFPersistance\bin\$(ConfigurationName)\*.pdb&quot; %plugins% /Y" />
  </Target>

  <Target Name="PostBuild" AfterTargets="PostBuildEvent">
    <Exec Command="SET bin=&quot;$(TargetDir)&quot;&#xD;&#xA;SET plugins=&quot;$(TargetDir)plugins\&quot;&#xD;&#xA;SET project=&quot;$(ProjectDir)&quot;&#xD;&#xA;&#xD;&#xA;for %%F in (%plugins%*) do @if exist &quot;%bin%%%~nxF&quot; (del /q %plugins%%%~nxF)" />
  </Target>

  <Target Name="Copy" AfterTargets="AfterPublish">
    <Exec Command="$(ProjectDir)..\BatchFiles\PostBuildEventPublish.bat &quot;$(ProjectDir)\bin\$(Configuration)\&quot; &quot;C:\Development\DigitalNomadDaveAspNetCore\Publish\$(Configuration)\&quot; " />
    <Message Importance="Normal" Text="Finished PostBuildEventPublish.bat" />
  </Target>

</Project>
