<Project Sdk="Microsoft.NET.Sdk.Web">

  <PropertyGroup>
    <TargetFramework>net47</TargetFramework>
    <TypeScriptToolsVersion>2.4</TypeScriptToolsVersion>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|AnyCPU'">
    <DocumentationFile>bin\Release\net47\DND.Web.xml</DocumentationFile>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|AnyCPU'">
    <DocumentationFile>bin\Debug\net47\DND.Web.xml</DocumentationFile>
  </PropertyGroup>

  <ItemGroup>
    <Compile Remove="ClientApp\**" />
    <Content Remove="ClientApp\**" />
    <EmbeddedResource Remove="ClientApp\**" />
    <None Remove="ClientApp\**" />
  </ItemGroup>

  <ItemGroup>
    <Content Remove="App_Data\airlines.json" />
    <Content Remove="App_Data\airportsAll.json" />
    <Content Remove="App_Data\countries.json" />
    <Content Remove="MVCImplementation\Shared\Views\EditorTemplates\DestinationType.cshtml" />
  </ItemGroup>

  <ItemGroup>
    <None Remove="App_Data\Regions.csv" />
    <None Remove="App_Data\ffmpeg\ffmpeg.exe" />
  </ItemGroup>

  <ItemGroup>
    <Content Include="App_Data\ffmpeg\ffmpeg.exe" />
  </ItemGroup>

  <ItemGroup>
    <PackageReference Include="AspNetCoreRateLimit" Version="2.1.0" />
    <PackageReference Include="Autofac" Version="4.8.0" />
    <PackageReference Include="Autofac.Extensions.DependencyInjection" Version="4.2.2" />
    <PackageReference Include="AutoMapper" Version="6.2.2" />
    <PackageReference Include="EntityFramework" Version="6.2.0" />
    <PackageReference Include="Microsoft.AspNetCore" Version="2.0.2" />
    <PackageReference Include="Microsoft.AspNetCore.Authentication.JwtBearer" Version="2.0.3" />
    <PackageReference Include="Microsoft.AspNetCore.Cors" Version="2.0.2" />
    <PackageReference Include="Microsoft.AspNetCore.Identity.EntityFrameworkCore" Version="2.0.2" />
    <PackageReference Include="Microsoft.AspNetCore.Mvc" Version="2.0.3" />
    <PackageReference Include="Microsoft.AspNetCore.Mvc.Formatters.Xml" Version="2.0.3" />
    <PackageReference Include="Microsoft.AspNetCore.Mvc.Razor.ViewCompilation" Version="2.0.3" PrivateAssets="All" />
    <PackageReference Include="Microsoft.AspNetCore.Mvc.Versioning" Version="2.2.0" />
    <PackageReference Include="Microsoft.AspNetCore.Razor.Runtime" Version="2.0.2" />
    <PackageReference Include="Microsoft.AspNetCore.ResponseCaching" Version="2.0.2" />
    <PackageReference Include="Microsoft.AspNetCore.ResponseCompression" Version="2.0.2" />
    <PackageReference Include="Microsoft.AspNetCore.StaticFiles" Version="2.0.2" />
    <PackageReference Include="Microsoft.EntityFrameworkCore" Version="2.0.2" />
    <PackageReference Include="Microsoft.EntityFrameworkCore.Sqlite" Version="2.0.2" />
    <PackageReference Include="Microsoft.VisualStudio.Web.BrowserLink" Version="2.0.2" />
    <PackageReference Include="Newtonsoft.Json" Version="11.0.2" />
    <PackageReference Include="Serilog.AspNetCore" Version="2.1.1" />
    <PackageReference Include="Serilog.Settings.Configuration" Version="2.6.1" />
    <PackageReference Include="Serilog.Sinks.Console" Version="3.1.1" />
    <PackageReference Include="Serilog.Sinks.Debug" Version="1.0.1" />
    <PackageReference Include="Serilog.Sinks.MSSqlServer" Version="5.1.2" />
    <PackageReference Include="Serilog.Sinks.RollingFile" Version="3.3.0" />
    <PackageReference Include="Swashbuckle.AspNetCore" Version="2.4.0" />
    <PackageReference Include="System.Data.SqlClient" Version="4.4.3" />
    <PackageReference Include="System.Data.SQLite" Version="1.0.108" />
  </ItemGroup>

  <ItemGroup>
    <DotNetCliToolReference Include="Microsoft.VisualStudio.Web.CodeGeneration.Tools" Version="2.0.1" />
  </ItemGroup>

  <ItemGroup>
    <Folder Include="Controllers\Admin\" />
    <Folder Include="Controllers\Api\" />
    <Folder Include="MVCImplementation\Account\ViewComponents\" />
    <Folder Include="MVCImplementation\Admin\ViewComponents\" />
    <Folder Include="MVCImplementation\Author\ViewComponents\" />
    <Folder Include="MVCImplementation\BucketList\ViewComponents\" />
    <Folder Include="MVCImplementation\FlightSearch\Controllers\" />
    <Folder Include="MVCImplementation\FlightSearch\Models\" />
    <Folder Include="MVCImplementation\FlightSearch\ViewComponents\" />
    <Folder Include="MVCImplementation\FlightSearch\Views\" />
    <Folder Include="MVCImplementation\Home\Api\" />
    <Folder Include="MVCImplementation\Home\Models\" />
    <Folder Include="MVCImplementation\Home\ViewComponents\" />
    <Folder Include="MVCImplementation\Manage\Api\" />
    <Folder Include="MVCImplementation\Manage\ViewComponents\" />
    <Folder Include="MVCImplementation\Sidebar\Views\" />
    <Folder Include="MVCImplementation\Tag\Models\" />
    <Folder Include="MVCImplementation\Tag\ViewComponents\" />
    <Folder Include="MVCImplementation\Tag\Views\" />
    <Folder Include="MVCImplementation\Account\Api\" />
    <Folder Include="MVCImplementation\Admin\Api\" />
    <Folder Include="MVCImplementation\Admin\Models\" />
    <Folder Include="App_Data\Logs\" />
    <Folder Include="MVCImplementation\Author\Models\" />
    <Folder Include="MVCImplementation\Author\Views\" />
    <Folder Include="MVCImplementation\Category\Models\" />
    <Folder Include="MVCImplementation\Category\ViewComponents\" />
    <Folder Include="MVCImplementation\Category\Views\" />
    <Folder Include="MVCImplementation\BucketList\Api\" />
    <Folder Include="MVCImplementation\BucketList\Models\" />
    <Folder Include="MVCImplementation\CarouselItem\Views\" />
    <Folder Include="MVCImplementation\ContentHtml\Models\" />
    <Folder Include="MVCImplementation\ContentText\Models\" />
    <Folder Include="MVCImplementation\ContentText\Views\" />
    <Folder Include="MVCImplementation\Faq\Models\" />
    <Folder Include="MVCImplementation\Faq\Views\" />
    <Folder Include="MVCImplementation\Gallery\Api\" />
    <Folder Include="MVCImplementation\Gallery\Models\" />
    <Folder Include="MVCImplementation\Gallery\ViewComponents\" />
    <Folder Include="MVCImplementation\Location\Models\" />
    <Folder Include="MVCImplementation\Location\ViewComponents\" />
    <Folder Include="MVCImplementation\MailingList\ViewComponents\" />
    <Folder Include="MVCImplementation\MailingList\Views\" />
    <Folder Include="MVCImplementation\Project\Views\" />
    <Folder Include="MVCImplementation\Testimonial\Views\" />
    <Folder Include="MVCImplementation\TravelMap\Api\" />
    <Folder Include="MVCImplementation\TravelMap\Models\" />
    <Folder Include="MVCImplementation\TravelMap\ViewComponents\" />
    <Folder Include="Views\" />
    <Folder Include="ViewComponents\" />
    <Folder Include="Scripts_Compile\" />
    <Folder Include="MVCImplementation\Videos\Api\" />
    <Folder Include="MVCImplementation\Videos\Models\" />
    <Folder Include="MVCImplementation\Videos\ViewComponents\" />
    <Folder Include="wwwroot\css\" />
    <Folder Include="wwwroot\FileManager\tmp\" />
    <Folder Include="wwwroot\images\" />
    <Folder Include="wwwroot\js\" />
    <Folder Include="wwwroot\vendor\" />
  </ItemGroup>

  <ItemGroup>
    <None Include="wwwroot\FileManager\js\custom.js" />
    <None Include="wwwroot\FileManager\js\directory.js" />
    <None Include="wwwroot\FileManager\js\file.js" />
    <None Include="wwwroot\FileManager\js\filetypes.js" />
    <None Include="wwwroot\FileManager\js\jquery-1.10.2.min.js" />
    <None Include="wwwroot\FileManager\js\jquery-1.11.1.min.js" />
    <None Include="wwwroot\FileManager\js\jquery-2.1.1.min.js" />
    <None Include="wwwroot\FileManager\js\jquery-dateFormat.min.js" />
    <None Include="wwwroot\FileManager\js\jquery-ui-1.10.4.custom.min.js" />
    <None Include="wwwroot\FileManager\js\main.js" />
    <None Include="wwwroot\FileManager\js\main.min.js" />
    <None Include="wwwroot\FileManager\js\mini-main.js" />
    <None Include="wwwroot\FileManager\js\tiny_mce_popup.js" />
    <None Include="wwwroot\FileManager\js\utils.js" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\DND.Common\DND.Common.csproj" />
    <ProjectReference Include="..\DND.Domain\DND.Domain.csproj" />
    <ProjectReference Include="..\DND.EFPersistance.Identity\DND.EFPersistance.Identity.csproj" />
    <ProjectReference Include="..\Marvin.Cache.Headers\Marvin.Cache.Headers.csproj" />
  </ItemGroup>

  <ItemGroup>
    <Reference Include="System.ServiceModel" />
  </ItemGroup>

  <ItemGroup>
    <Content Update="appsettings.Development.json">
      <CopyToOutputDirectory>Always</CopyToOutputDirectory>
    </Content>
    <Content Update="appsettings.json">
      <CopyToOutputDirectory>Always</CopyToOutputDirectory>
    </Content>
    <Content Update="appsettings.Production.json">
      <CopyToOutputDirectory>Always</CopyToOutputDirectory>
    </Content>
  </ItemGroup>

  <ItemGroup>
    <None Update="DND.db">
      <CopyToOutputDirectory>Always</CopyToOutputDirectory>
    </None>
  </ItemGroup>

  <Target Name="MyPreCleanTarget" BeforeTargets="Clean">
    <Exec Command="gulp clean" />
  </Target>

  <Target Name="RemoveObjAndBin" AfterTargets="Clean">
    <RemoveDir Directories="$(BaseIntermediateOutputPath)" />
    <RemoveDir Directories="$(TargetDir)" />
  </Target>

  <Target Name="MyPreCompileTarget" BeforeTargets="Build">
    <Exec Command="gulp clean" />
    <Exec Command="gulp less" />
    <Exec Command="gulp scripts" />
    <Exec Command="gulp min" />
  </Target>

  <Target Name="PostBuild" AfterTargets="PostBuildEvent">
    <Exec Command="SET bin=&quot;$(TargetDir)&quot;&#xD;&#xA;SET plugins=&quot;$(TargetDir)plugins\&quot;&#xD;&#xA;SET project=&quot;$(ProjectDir)&quot;&#xD;&#xA;&#xD;&#xA;for %%F in (%plugins%*) do @if exist &quot;%bin%%%~nxF&quot; (del /q %plugins%%%~nxF)" />
    <Message Importance="Normal" Text="Finished Plugin Copy" />
  </Target>

  <Target Name="PreBuild" BeforeTargets="PreBuildEvent">
    <Exec Command="SET plugins=&quot;$(TargetDir)plugins\&quot;&#xD;&#xA;del /q %plugins%\*&#xD;&#xA;for /d %%x in (%plugins%\*) do @rd /s /q ^&quot;%%x^&quot;&#xD;&#xA;&#xD;&#xA;call &quot;$(ProjectDir)..\BatchFiles\Build\BuildPlugins.bat&quot; $(ConfigurationName)&#xD;&#xA;&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.ApplicationServices\bin\$(ConfigurationName)\*.dll&quot; %plugins% /Y&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.DomainServices\bin\$(ConfigurationName)\*.dll&quot; %plugins% /Y&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.Repository\bin\$(ConfigurationName)\*.dll&quot; %plugins% /Y&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.UnitOfWork\bin\$(ConfigurationName)\*.dll&quot; %plugins% /Y&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.EFPersistance\bin\$(ConfigurationName)\*.dll&quot; %plugins% /Y&#xD;&#xA;&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.ApplicationServices\bin\$(ConfigurationName)\*.pdb&quot; %plugins% /Y&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.DomainServices\bin\$(ConfigurationName)\*.pdb&quot; %plugins% /Y&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.Repository\bin\$(ConfigurationName)\*.pdb&quot; %plugins% /Y&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.UnitOfWork\bin\$(ConfigurationName)\*.pdb&quot; %plugins% /Y&#xD;&#xA;xcopy &quot;$(ProjectDir)..\DND.EFPersistance\bin\$(ConfigurationName)\*.pdb&quot; %plugins% /Y" />
    <Message Importance="Normal" Text="Finished Plugin Build" />
  </Target>
  
  <Target Name="PrepublishScript" BeforeTargets="PrepareForPublish">
    <ItemGroup>
      <DocFile Include="bin\$(Configuration)\$(TargetFramework)\*.xml" />
    </ItemGroup>
    <Copy SourceFiles="@(DocFile)" DestinationFolder="$(PublishDir)" SkipUnchangedFiles="false" />
    <Message Importance="Normal" Text="Finished xml copy" />
  </Target>

  <Target Name="PluginCopyPublish" AfterTargets="AfterPublish">
    <Exec Command="$(ProjectDir)..\BatchFiles\Build\PostBuildEventPublish.bat &quot;$(ProjectDir)bin\$(Configuration)\&quot; &quot;$(PublishUrl)&quot; &quot;$(ProjectDir)\$(PublishUrl)&quot; " />
    <Message Importance="Normal" Text="Finished PostBuildEventPublish.bat" />
  </Target>


</Project>
