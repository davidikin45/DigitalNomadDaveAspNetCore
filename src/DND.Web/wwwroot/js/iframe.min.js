!function(t){function e(t,e){for(var a=window,o=(t||"").split(".");a&&o.length;)a=a[o.shift()];return"function"==typeof a?a:(e.push(t),Function.constructor.apply(null,e))}function a(a,o){var n,r,i,d;(n=a.getAttribute("data-ajax-confirm"))&&!window.confirm(n)||(r=t(a.getAttribute("data-ajax-loading")),d=parseInt(a.getAttribute("data-ajax-loading-duration"),10)||0,t.extend(o,{type:a.getAttribute("data-ajax-method")||void 0,url:a.getAttribute("data-ajax-url")||void 0,cache:"true"===(a.getAttribute("data-ajax-cache")||"").toLowerCase(),beforeSend:function(t){var o;return function(t,e){(function(t){return"GET"===t||"POST"===t})(e)||t.setRequestHeader("X-HTTP-Method-Override",e)}(t,i),!1!==(o=e(a.getAttribute("data-ajax-begin"),["xhr"]).apply(a,arguments))&&r.show(d),o},complete:function(){r.hide(d),e(a.getAttribute("data-ajax-complete"),["xhr","status"]).apply(a,arguments)},success:function(o,n,r){!function(e,a,o){var n;-1===o.indexOf("application/x-javascript")&&(n=(e.getAttribute("data-ajax-mode")||"").toUpperCase(),t(e.getAttribute("data-ajax-update")).each(function(e,o){var r;switch(n){case"BEFORE":r=o.firstChild,t("<div />").html(a).contents().each(function(){o.insertBefore(this,r)});break;case"AFTER":t("<div />").html(a).contents().each(function(){o.appendChild(this)});break;case"REPLACE-WITH":t(o).replaceWith(a);break;default:t(o).html(a)}}))}(a,o,r.getResponseHeader("Content-Type")||"text/html"),e(a.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(a,arguments)},error:function(){e(a.getAttribute("data-ajax-failure"),["xhr","status","error"]).apply(a,arguments)}}),"POST"===(i=o.type.toUpperCase())&&(o.cache=!1,o.processData=!1,o.contentType=!1),t.ajax(o))}var o="unobtrusiveAjaxClick",n="unobtrusiveAjaxClickTarget",r="unobtrusiveValidation";t(document).on("click","a[data-ajax=true]",function(t){t.preventDefault(),a(this,{url:this.href,type:"GET",data:[]})}),t(document).on("click","form[data-ajax=true] input[type=image]",function(e){var a=e.target.name,n=t(e.target),r=t(n.parents("form")[0]),i=n.offset();r.data(o,[{name:a+".x",value:Math.round(e.pageX-i.left)},{name:a+".y",value:Math.round(e.pageY-i.top)}]),setTimeout(function(){r.removeData(o)},0)}),t(document).on("click","form[data-ajax=true] :submit",function(e){var a=e.currentTarget.name,r=t(e.target),i=t(r.parents("form")[0]);i.data(o,a?[{name:a,value:e.currentTarget.value}]:[]),i.data(n,r),setTimeout(function(){i.removeData(o),i.removeData(n)},0)}),t(document).on("submit","form[data-ajax=true]",function(e){t(this).data(o);var i=t(this).data(n),d=i&&i.hasClass("cancel");e.preventDefault();var l=new FormData(this);(d||function(e){var a=t(e).data(r);return!a||!a.validate||a.validate()}(this))&&a(this,{url:this.action,type:this.method||"GET",data:l})})}(jQuery),function(){var t=function(t){if(t){var e=t.match(/-?\d+\.\d+/g);return{latitude:e[0],longitude:e[1]}}};$(".editor-for-dbgeography, .display-for-dbgeography").each(function(e,a){var o=$(a),n=$("<div>",{css:{width:"100%",height:"400px"}}).insertAfter(o),r=null;null!==document.getElementById("PlaceId")&&(r=document.getElementById("PlaceId"));var i=t(this.value);i&&i.latitude&&i.longitude||(i={latitude:46.8729599408635,longitude:16.5243165940046});var d=new google.maps.LatLng(i.latitude,i.longitude),l=new google.maps.Map(n[0],{zoom:7,center:d,mapTypeId:"roadmap"}),c=new google.maps.Marker({position:d,map:l});$(document).ready(function(){$(window).resize(function(){google.maps.event.trigger(l,"resize"),l.setCenter(c.getPosition())}),google.maps.event.trigger(l,"resize"),l.setCenter(c.getPosition())});var s=function(t){c.setPosition(t.latLng),l.panTo(t.latLng),o.val(c.getPosition().toUrlValue(13))};if(o.hasClass("editor-for-dbgeography")){google.maps.event.addListener(l,"click",function(t){s(t),null!==r&&(r.value="")}),google.maps.event.addListener(l,"click",function(){g.close()}),$("<input>",{id:"map-search",class:"controls",type:"text",placeholder:"Enter a location"}).insertAfter(o);var u=document.getElementById("map-search"),p=($('<div id="infowindow-content"><span id="place-name" class="title"></span><br>Place ID<span id="place-id"></span><br><span id="place-address"></span></div>').insertAfter(o),document.getElementById("infowindow-content")),m=new google.maps.places.Autocomplete(u);m.bindTo("bounds",l),l.controls[google.maps.ControlPosition.TOP_LEFT].push(u);var g=new google.maps.InfoWindow;g.setContent(p),c.addListener("click",function(){g.open(l,c)}),m.addListener("place_changed",function(){g.close();var t=m.getPlace();if(t.geometry){t.geometry.viewport?l.fitBounds(t.geometry.viewport):(l.setCenter(t.geometry.location),l.setZoom(17)),t.geometry.location;var e=t.place_id;null!==r&&(r.value=e),s({latLng:t.geometry.location}),c.setVisible(!0),p.children["place-name"].textContent=t.name,p.children["place-id"].textContent=t.place_id,p.children["place-address"].textContent=t.formatted_address,g.open(l,c)}})}})}(),$(".modal-transparent").on("show.bs.modal",function(){setTimeout(function(){$(".modal-backdrop").addClass("modal-backdrop-transparent")},0)}),$(".modal-transparent").on("hidden.bs.modal",function(){$(".modal-backdrop").addClass("modal-backdrop-transparent")}),$(".modal-fullscreen").on("show.bs.modal",function(){setTimeout(function(){$(".modal-backdrop").addClass("modal-backdrop-fullscreen")},0)}),$(".modal-fullscreen").on("hidden.bs.modal",function(){$(".modal-backdrop").addClass("modal-backdrop-fullscreen")}),$(window).scroll(function(){$(this).scrollTop()>=50?$("#return-to-top").fadeIn(200):$("#return-to-top").fadeOut(200)}),$("#return-to-top").click(function(){$("body,html").animate({scrollTop:0},500)}),$(document).scroll(function(){localStorage.page=document.URL,localStorage.scrollTop=$(document).scrollTop()}),$(document).ready(function(){localStorage.page==document.URL&&$(document).scrollTop(localStorage.scrollTop)});