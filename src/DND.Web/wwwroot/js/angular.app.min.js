!function(){"use strict";window.onerror=function(e){window.alerts?window.alerts.error("There was a problem with your last action.  Please reload the page, then try again."):alert("Something serious went wrong.  Please close browser, then try again.")},window.app=angular.module("DND",["ui.bootstrap","ngMap"]),window.app.run(["$http","$rootScope","$templateCache","NgMap",function(e,t,o,n){n.getMap().then(function(e){console.log("map initialized"),t.map=e}).catch(function(e){console.error("map error: ",e)})}]),window.app.controller("MapCtrl",["$compile","NgMap",function(e,t){this.openGoogleMap=function(e,t){var o="https://www.google.com/maps/search/?api=1&query="+this.position.lat()+","+this.position.lng();t&&(o=o+"&query_place_id="+t),window.open(o,"_blank")},this.openLocation=function(e,t){window.location.href="/locations/"+t}}]),window.app.factory("alerts",[function(){return window.alerts}]),window.app.factory("$exceptionHandler",["$log","alerts",function(e,t){return function(o,n){t.error("There was a problem with your last action.  Please reload the page, then try again."),e.error(o,n)}}]),window.app.service("LoadingInterceptor",["$q","$rootScope","$log",function(e,t,o){function n(){t.loading=a<r}var r=0,a=0;return{request:function(t){return r++,n(),t||e.when(t)},requestError:function(t){return a++,n(),o.error("Request error:",t),e.reject(t)},response:function(t){return a++,n(),t||e.when(t)},responseError:function(r){return a++,n(),o.error("Response error:",r),t.error=r.data.error,t.errors=r.data.errors,$("#error").modal("show"),e.reject(r)}}}]),window.app.config(["$httpProvider",function(e){e.interceptors.push("LoadingInterceptor")}]),window.app.config(["$locationProvider",function(e){}]),window.app.config(["$sceDelegateProvider",function(e){e.resourceUrlWhitelist(["self","https://www.google.com/**"])}]),window.app.config(["$modalProvider",function(e){e.options.windowClass="modal-fullscreen",e.options.backdropClass="modal-backdrop-fullscreen",e.options.backdrop="static"}])}(),function(){"use strict";function e(e,o,n,r,a,i,l){var s=this;s.close=function(){},s.openGoogleMapModal=function(){a.open({templateUrl:"/site/template/googleMapModal.tmpl.cshtml",scope:r,bindToController:!0,controller:t,controllerAs:"vm",resolve:{latitude:function(){return s.latitude},longitude:function(){return s.longitude},placeid:function(){return s.placeid},NgMap:function(){return l},$sce:function(){return i}}})}}function t(e,t,o,n,r){var a=this;a.latitude=o,a.longitude=n,a.placeid=r,a.trustSrc=function(t){var o="";return o=a.placeid?"https://www.google.com/maps/embed/v1/place?q=place_id:"+a.placeid+"&zoom=6&key="+t:"https://www.google.com/maps/embed/v1/place?q="+a.latitude+","+a.longitude+"&zoom=6&key="+t,e.trustAsResourceUrl(o)}}window.app.directive("googleMap",function(){return{templateUrl:"/site/template/googleMap.tmpl.cshtml",controller:e,bindToController:{placeid:"@",latitude:"@",longitude:"@"},scope:{},controllerAs:"vm"}}),e.$inject=["$window","$filter","$rootScope","$scope","$modal","$sce","NgMap"],t.$inject=["$sce","NgMap","latitude","longitude","placeid"]}(),function(){"use strict";Object.defineProperty(Array.prototype,"count",{get:function(){return this.length}}),Array.prototype.addRange||(Array.prototype.addRange=function(e){this.push.apply(this,e)})}(),function(){function e(e){var t=$(n(e));o.append(t),window.setTimeout(function(){t.fadeOut()},3e3)}var t={showAlert:e,success:function(t){e({alertClass:"alert-success",message:t})},info:function(t){e({alertClass:"alert-info",message:t})},warning:function(t){e({alertClass:"alert-warning",message:t})},error:function(t){e({alertClass:"alert-danger",message:t})}};window.alerts=t;var o=$(".alert-container"),n=_.template("<div class='alert <%= alertClass %> alert-dismissable'><button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;</button><%= message %></div>")}(),function(){window.app.filter("parseDate",function(){return function(e){return"string"!=typeof e||-1===e.indexOf("/Date")?e:new Date(parseInt(e.substr(6)))}})}();